{"version":3,"sources":["turbopack:///[project]/app/docs/workflows/page.tsx"],"sourcesContent":["export default function WorkflowsDocsPage() {\n  return (\n    <div className=\"prose max-w-none\">\n      <h1>Workflow Engine API</h1>\n      \n      <p>\n        The Workflow Engine provides live automation monitoring and control through a RESTful API.\n      </p>\n\n      <h2>Endpoints</h2>\n\n      <h3>GET /api/workflows</h3>\n      <p>List all workflows with current stats.</p>\n      \n      <h4>Response Fields</h4>\n      <ul>\n        <li><code>id</code> (string) - Unique workflow identifier</li>\n        <li><code>name</code> (string) - Human-readable workflow name</li>\n        <li><code>enabled</code> (boolean) - Whether workflow is enabled</li>\n        <li><code>last_run</code> (number) - Unix timestamp of last execution</li>\n        <li><code>status</code> (string) - One of: ok, degraded, fail</li>\n        <li><code>avg_latency_ms</code> (number) - Average execution time in milliseconds</li>\n        <li><code>success_7d</code> (number) - Successful runs in last 7 days</li>\n        <li><code>fail_7d</code> (number) - Failed runs in last 7 days</li>\n      </ul>\n\n      <h4>Example Response</h4>\n      <pre className=\"bg-gray-50 p-4 rounded text-sm overflow-x-auto\">\n{`[\n  {\n    \"id\": \"self_heal\",\n    \"name\": \"Self-Heal Cycle\",\n    \"enabled\": true,\n    \"last_run\": 1729900000,\n    \"status\": \"ok\",\n    \"avg_latency_ms\": 245.5,\n    \"success_7d\": 168,\n    \"fail_7d\": 0\n  },\n  {\n    \"id\": \"health_monitor\",\n    \"name\": \"Health Monitor\",\n    \"enabled\": true,\n    \"last_run\": 1729899700,\n    \"status\": \"ok\",\n    \"avg_latency_ms\": 120.3,\n    \"success_7d\": 504,\n    \"fail_7d\": 2\n  }\n]`}\n      </pre>\n\n      <h3>GET /api/workflows/&lt;id&gt;/runs</h3>\n      <p>Get the last 50 execution runs for a specific workflow.</p>\n\n      <h4>Parameters</h4>\n      <ul>\n        <li><code>id</code> (path) - Workflow ID</li>\n      </ul>\n\n      <h4>Response Fields</h4>\n      <ul>\n        <li><code>ts</code> (number) - Unix timestamp of run</li>\n        <li><code>duration_ms</code> (number) - Execution time in milliseconds</li>\n        <li><code>status</code> (string) - Run status: ok or fail</li>\n        <li><code>note</code> (string) - Additional context or error message</li>\n      </ul>\n\n      <h4>Example Response</h4>\n      <pre className=\"bg-gray-50 p-4 rounded text-sm overflow-x-auto\">\n{`[\n  {\n    \"ts\": 1729900000,\n    \"duration_ms\": 250,\n    \"status\": \"ok\",\n    \"note\": \"Self-heal cycle #42\"\n  },\n  {\n    \"ts\": 1729896400,\n    \"duration_ms\": 220,\n    \"status\": \"ok\",\n    \"note\": \"Self-heal cycle #41\"\n  }\n]`}\n      </pre>\n\n      <h3>POST /api/workflows/&lt;id&gt;/toggle</h3>\n      <p>Enable or disable a workflow. Toggles the current state.</p>\n\n      <h4>Parameters</h4>\n      <ul>\n        <li><code>id</code> (path) - Workflow ID</li>\n      </ul>\n\n      <h4>Response Fields</h4>\n      <ul>\n        <li><code>ok</code> (boolean) - Whether operation succeeded</li>\n        <li><code>workflow_id</code> (string) - ID of toggled workflow</li>\n        <li><code>enabled</code> (boolean) - New enabled state</li>\n      </ul>\n\n      <h4>Example Response</h4>\n      <pre className=\"bg-gray-50 p-4 rounded text-sm overflow-x-auto\">\n{`{\n  \"ok\": true,\n  \"workflow_id\": \"self_heal\",\n  \"enabled\": false\n}`}\n      </pre>\n\n      <h2>Rate Limits</h2>\n      <p>\n        All workflow API endpoints are rate-limited to <strong>5 requests per second per IP address</strong>.\n        Exceeding this limit returns HTTP 429 with error message.\n      </p>\n\n      <h2>Error Responses</h2>\n\n      <h3>404 Not Found</h3>\n      <pre className=\"bg-gray-50 p-4 rounded text-sm overflow-x-auto\">\n{`{\n  \"ok\": false,\n  \"error\": \"Workflow not found\"\n}`}\n      </pre>\n\n      <h3>429 Rate Limit Exceeded</h3>\n      <pre className=\"bg-gray-50 p-4 rounded text-sm overflow-x-auto\">\n{`{\n  \"ok\": false,\n  \"error\": \"Rate limit exceeded\"\n}`}\n      </pre>\n\n      <h3>500 Internal Server Error</h3>\n      <pre className=\"bg-gray-50 p-4 rounded text-sm overflow-x-auto\">\n{`{\n  \"ok\": false,\n  \"error\": \"Error message here\"\n}`}\n      </pre>\n\n      <h2>Data Sources</h2>\n      <p>\n        Workflow data is aggregated from multiple log files:\n      </p>\n      <ul>\n        <li><code>logs/self_heal.ndjson</code> - Self-healing cycle execution logs</li>\n        <li><code>logs/auto_rollback.ndjson</code> - Automatic rollback logs</li>\n        <li><code>exports/uptime_*.json</code> - Health monitoring uptime data</li>\n      </ul>\n      <p>\n        If log files are missing or empty, the API returns mock data to keep endpoints stable.\n      </p>\n\n      <h2>Live Dashboard</h2>\n      <p>\n        Visit <a href=\"/dashboard\" className=\"text-blue-600 hover:underline\">/dashboard</a> to see\n        the live workflow engine in action with auto-refreshing data every 10 seconds.\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}