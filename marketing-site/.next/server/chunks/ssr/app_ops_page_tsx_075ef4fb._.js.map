{"version":3,"sources":["turbopack:///[project]/app/ops/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\n\ntype Snap = { ts:number; health:string; tickets:number; cpu:number; latency_p95_ms:number; };\n\nexport default function Ops(){\n  const [snap, setSnap] = useState<Snap|null>(null);\n  const [feed, setFeed] = useState<{ts:number; cpu:number; latency_p95_ms:number}[]>([]);\n\n  useEffect(()=>{\n    fetch(\"/api/ops/state\").then(r=>r.json()).then(setSnap).catch(()=>{});\n    const es = new EventSource(\"/api/ops/stream\");\n    es.onmessage = (e)=>{\n      const d = JSON.parse(e.data);\n      setFeed(f=>[d, ...f].slice(0,120));\n    };\n    return ()=>es.close();\n  },[]);\n\n  return (\n    <main className=\"mx-auto max-w-5xl px-4 py-10\">\n      <h1 className=\"text-2xl font-semibold mb-4\">Operations Dashboard</h1>\n      <div className=\"grid sm:grid-cols-3 gap-4 mb-6\">\n        <div className=\"rounded border p-4\">\n          <div className=\"text-xs text-gray-500\">Health</div>\n          <div className=\"text-xl\">{snap?.health ?? \"—\"}</div>\n        </div>\n        <div className=\"rounded border p-4\">\n          <div className=\"text-xs text-gray-500\">Tickets</div>\n          <div className=\"text-xl\">{snap?.tickets ?? 0}</div>\n        </div>\n        <div className=\"rounded border p-4\">\n          <div className=\"text-xs text-gray-500\">p95 Latency (ms)</div>\n          <div className=\"text-xl\">{snap?.latency_p95_ms ?? \"—\"}</div>\n        </div>\n      </div>\n      <h2 className=\"font-medium mb-2\">Live metrics</h2>\n      <div className=\"rounded border p-4 text-sm h-64 overflow-auto\">\n        {feed.map((r,i)=>(\n          <div key={i} className=\"flex gap-4 text-xs\">\n            <div>{new Date(r.ts*1000).toLocaleTimeString()}</div>\n            <div>cpu {r.cpu}</div>\n            <div>p95 {r.latency_p95_ms}ms</div>\n          </div>\n        ))}\n        {feed.length===0 && <div className=\"text-gray-500\">Waiting for stream…</div>}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"wDACA,EAAA,EAAA,CAAA,CAAA,OAIe,SAAS,IACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,MACtC,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmD,EAAE,EAYrF,MAVA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,MAAM,kBAAkB,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,IAAI,CAAC,GAAS,KAAK,CAAC,KAAK,GACnE,IAAM,EAAK,IAAI,YAAY,mBAK3B,OAJA,EAAG,SAAS,CAAG,AAAC,IACd,IAAM,EAAI,KAAK,KAAK,CAAC,EAAE,IAAI,EAC3B,EAAQ,GAAG,CAAC,KAAM,EAAE,CAAC,KAAK,CAAC,EAAE,KAC/B,EACO,IAAI,EAAG,KAAK,EACrB,EAAE,EAAE,EAGF,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,yCACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA8B,yBAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,WACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mBAAW,GAAM,QAAU,SAE5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,YACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mBAAW,GAAM,SAAW,OAE7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,qBACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mBAAW,GAAM,gBAAkB,YAGtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4BAAmB,iBACjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0DACZ,EAAK,GAAG,CAAC,CAAC,EAAE,IACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAY,UAAU,+BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,IAAI,KAAU,IAAL,EAAE,EAAE,EAAO,kBAAkB,KAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,OAAK,EAAE,GAAG,IACf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,OAAK,EAAE,cAAc,CAAC,UAHnB,IAMG,IAAd,EAAK,MAAM,EAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,6BAI3D"}